testName;inputMatchers;expectedIndexMatchers;expectedScanMatchers
simple_existing_metric_name;{__name__="http_requests_total"};{__name__="http_requests_total"};{}
simple_existing_label_name;{method="GET"};{method="GET"};{}
simple_existing_label_name;{instance="web-us-east-1-a-001"};{instance="web-us-east-1-a-001"};{}
simple_low_cardinality_label_name;{pod="test-runner-opqrstuvwx-11111"};{pod="test-runner-opqrstuvwx-11111"};{}
specific_low_cardinality_label_high_cardinality_metric_name;{__name__="go_memstats_alloc_bytes",pod="test-runner-opqrstuvwx-11111"};{pod="test-runner-opqrstuvwx-11111"};{__name__="go_memstats_alloc_bytes"}
high_cardinality_regex_prefix_matcher;{pod=~"prometheus-.*"};{pod=~"prometheus-.*"};{}
high_cardinality_exact_matcher;{container="nginx"};{container="nginx"};{}
high_cardinality_exact_matcher;{namespace="monitoring"};{namespace="monitoring"};{}
non_existent_label;{non_existent_label="foo"};{non_existent_label="foo"};{}
high_cardinality_exact_matchers;{__name__="http_requests_total",method="GET"};{__name__="http_requests_total",method="GET"};{}
higher_cardinality_regex_prefix_and_exact_matcher;{__name__=~"http.*",method="POST"};{__name__=~"http.*",method="POST"};{}
negative_exact_matcher;{job!="prometheus"};{job!="prometheus"};{}
empty_matchers;{__name__="",method=""};{__name__=""};{method=""}
exact_non_existent_metric_high_cardinality_method;{__name__="non_existent_metric",method="GET"};{__name__="non_existent_metric"};{method="GET"}
high_cardinality_regex_set_matcher;{__name__=~"http_requests_total|cpu_usage_percent"};{__name__=~"http_requests_total|cpu_usage_percent"};{}
high_cardinality_negative_metchers;{job!="prometheus",method!="GET"};{job!="prometheus",method!="GET"};{}
metric_name_with_multiple_negative_matchers;{__name__="http_requests_total",job!="test",method!="DELETE"};{__name__="http_requests_total",job!="test",method!="DELETE"};{}
metric_name_with_multiple_wildcard_regex_matchers;{__name__="http_requests_total",method=~".*",status=~".*",job=~".*"};{__name__="http_requests_total",method=~".*",status=~".*",job=~".*"};{}
metric_name_with_multiple_exact_matchers;{__name__="http_requests_total",method="GET",status="200",job="prometheus"};{__name__="http_requests_total",method="GET",status="200",job="prometheus"};{}
metric_name_with_mixed_matcher_types;{__name__="http_requests_total",job!="test",method=~"GET|POST",status!~"5.*"};{__name__="http_requests_total",job!="test",method=~"GET|POST",status!~"5.*"};{}
low_cardinality_instance_with_high_cardinality_metric_and_method;{__name__="http_requests_total",instance="web-us-east-1-a-001",method="GET"};{instance="web-us-east-1-a-001"};{__name__="http_requests_total",method="GET"}
low_cardinality_instance_with_high_cardinality_metric;{__name__="http_requests_total",instance="web-us-east-1-a-001"};{instance="web-us-east-1-a-001"};{__name__="http_requests_total"}
high_cardinality_regex_with_exact_matcher;{pod=~"prometheus-.*",namespace="monitoring"};{pod=~"prometheus-.*",namespace="monitoring"};{}
high_cardinality_metric_with_regex_matcher;{__name__="cpu_usage_percent",pod=~"grafana-.*"};{__name__="cpu_usage_percent",pod=~"grafana-.*"};{}
multiple_high_cardinality_exact_matchers;{job="prometheus",container="prometheus"};{job="prometheus",container="prometheus"};{}
mixed_cardinality_exact_matchers;{namespace="monitoring",method="GET",status="200"};{namespace="monitoring",method="GET",status="200"};{}
low_cardinality_regex_with_exact_matcher;{instance=~"web-us-east-1-.*",method="POST"};{instance=~"web-us-east-1-.*",method="POST"};{}
low_cardinality_instance_with_negative_empty_metric_name;{instance="web-us-east-1-a-001",__name__!=""};{instance="web-us-east-1-a-001"};{__name__!=""}
low_cardinality_instance_with_specific_metric;{instance="web-us-east-1-a-001",__name__="prometheus_config_reload"};{instance="web-us-east-1-a-001"};{__name__="prometheus_config_reload"}
high_cardinality_regex_pattern_with_exact_matcher;{pod=~".*-abcdefghij-.*",container="nginx"};{pod=~".*-abcdefghij-.*",container="nginx"};{}
high_cardinality_metric_with_mixed_cardinality_labels;{__name__="memory_usage_bytes",namespace="kube-system",container="fluentd"};{__name__="memory_usage_bytes",namespace="kube-system",container="fluentd"};{}
mixed_cardinality_with_regex_and_exact_matchers;{job="grafana",instance=~"api-.*",method="GET",status="404"};{job="grafana",instance=~"api-.*",status="404"};{method="GET"}
high_cardinality_metric_with_regex_and_exact_matchers;{__name__="network_bytes_sent",namespace="default",pod=~"redis-.*",container="redis"};{__name__="network_bytes_sent",pod=~"redis-.*",container="redis"};{namespace="default"}
low_cardinality_regex_with_high_cardinality_matchers;{instance=~"db-.*",container="postgres",method="POST",status=~"5.*"};{instance=~"db-.*",container="postgres",status=~"5.*"};{method="POST"}
complex_high_cardinality_metric_with_multiple_matchers;{__name__="go_memstats_alloc_bytes",job="prometheus",namespace="monitoring",pod=~"prometheus-.*",instance=~"monitor-.*"};{__name__="go_memstats_alloc_bytes",pod=~"prometheus-.*",instance=~"monitor-.*"};{job="prometheus",namespace="monitoring"}
conflicting_instance_matchers_exact_wins;{__name__="go_memstats_alloc_bytes",job="prometheus",namespace="monitoring",instance=~".*web.*|.*prometheus.*|.*not-prometheus.*|.*nginx.*|.*foo.*|.*bar.*|.*baz.*",instance="web-us-east-1-a-001"};{__name__="go_memstats_alloc_bytes",instance="web-us-east-1-a-001"};{job="prometheus",namespace="monitoring",instance=~".*web.*|.*prometheus.*|.*not-prometheus.*|.*nginx.*|.*foo.*|.*bar.*|.*baz.*"}
non_existent_regex_in_a_regular_query;{__name__="go_memstats_alloc_bytes",job="prometheus",namespace="monitoring",pod=~"prometheus-.*",instance=~"monitor-.*",non_existent=~".*(go_memstats_alloc_bytes(_total)?).*"};{non_existent=~".*(go_memstats_alloc_bytes(_total)?).*"};{__name__="go_memstats_alloc_bytes",job="prometheus",namespace="monitoring",pod=~"prometheus-.*",instance=~"monitor-.*"}
non_existent_negative_regexp_in_a_regular_query;{__name__="go_memstats_alloc_bytes",job="prometheus",namespace="monitoring",pod=~"prometheus-.*",instance=~"monitor-.*",non_existent!~".*(go_memstats_alloc_bytes(_total)?).*"};{__name__="go_memstats_alloc_bytes",pod=~"prometheus-.*",instance=~"monitor-.*"};{job="prometheus",namespace="monitoring",non_existent!~".*(go_memstats_alloc_bytes(_total)?).*"}
non_existent_in_a_regular_query;{__name__="go_memstats_alloc_bytes",job="prometheus",namespace="monitoring",pod=~"prometheus-.*",instance=~"monitor-.*",non_existent="go_memstats_alloc_bytes_total"};{non_existent="go_memstats_alloc_bytes_total"};{__name__="go_memstats_alloc_bytes",job="prometheus",namespace="monitoring",pod=~"prometheus-.*",instance=~"monitor-.*"}
non_existent_negative_in_a_regular_query;{__name__="go_memstats_alloc_bytes",job="prometheus",namespace="monitoring",pod=~"prometheus-.*",instance=~"monitor-.*",non_existent!="go_memstats_alloc_bytes_total"};{__name__="go_memstats_alloc_bytes",pod=~"prometheus-.*",instance=~"monitor-.*"};{job="prometheus",namespace="monitoring",non_existent!="go_memstats_alloc_bytes_total"}
non_existent_value_regex_in_a_regular_query;{__name__="go_memstats_alloc_bytes",job="prometheus",namespace="monitoring",pod=~"prometheus-.*",instance=~"monitor-.*",status=~"TEST123?.*"};{__name__="go_memstats_alloc_bytes",pod=~"prometheus-.*",status=~"TEST123?.*"};{job="prometheus",namespace="monitoring",instance=~"monitor-.*"}
non_existent_set_value_regex_in_a_regular_query;{__name__="go_memstats_alloc_bytes",job="prometheus",namespace="monitoring",pod=~"prometheus-.*",instance=~"monitor-.*",status=~"(TEST|TEST123)"};{status=~"(TEST|TEST123)"};{__name__="go_memstats_alloc_bytes",job="prometheus",namespace="monitoring",pod=~"prometheus-.*",instance=~"monitor-.*"}
non_existent_value_negative_regexp_in_a_regular_query;{__name__="go_memstats_alloc_bytes",job="prometheus",namespace="monitoring",pod=~"prometheus-.*",instance=~"monitor-.*",status!~"TEST123?.*"};{__name__="go_memstats_alloc_bytes",pod=~"prometheus-.*",status!~"TEST123?.*"};{job="prometheus",namespace="monitoring",instance=~"monitor-.*"}
non_existent_value_in_a_regular_query;{__name__="go_memstats_alloc_bytes",job="prometheus",namespace="monitoring",pod=~"prometheus-.*",instance=~"monitor-.*",status="TEST123"};{status="TEST123"};{__name__="go_memstats_alloc_bytes",job="prometheus",namespace="monitoring",pod=~"prometheus-.*",instance=~"monitor-.*"}
non_existent_value_negative_in_a_regular_query;{__name__="go_memstats_alloc_bytes",job="prometheus",namespace="monitoring",pod=~"prometheus-.*",instance=~"monitor-.*",status!="TEST123"};{__name__="go_memstats_alloc_bytes",pod=~"prometheus-.*",instance=~"monitor-.*"};{job="prometheus",namespace="monitoring",status!="TEST123"}
multiple_instance_matchers_one_with_low_cardinality_another_with_empty_matcher;{__name__="go_memstats_alloc_bytes",job="prometheus",namespace="monitoring",instance=~".+",instance="web-us-east-1-a-001"};{instance="web-us-east-1-a-001"};{__name__="go_memstats_alloc_bytes",job="prometheus",namespace="monitoring",instance=~".+"}
multiple_instance_matchers_one_with_low_cardinality_another_matching_a_lot_of_values;{job="prometheus",namespace="monitoring",instance=~".*web.*|.*prometheus.*|.*not-prometheus.*|.*nginx.*|.*foo.*|.*bar.*|.*baz.*",instance="web-us-east-1-a-001"};{instance="web-us-east-1-a-001"};{job="prometheus",namespace="monitoring",instance=~".*web.*|.*prometheus.*|.*not-prometheus.*|.*nginx.*|.*foo.*|.*bar.*|.*baz.*"}
expensive_alternating_regex_with_dot_stars;{job="prometheus",namespace="monitoring",instance=~".*web.*|.*prometheus.*|.*not-prometheus.*|.*nginx.*|.*foo.*|.*bar.*|.*baz.*"};{job="prometheus",namespace="monitoring",instance=~".*web.*|.*prometheus.*|.*not-prometheus.*|.*nginx.*|.*foo.*|.*bar.*|.*baz.*"};{}
expensive_alternating_regex_with_dot_stars_and_a_negative_matcher;{job="prometheus",namespace!="monitoring",instance=~".*web.*|.*prometheus.*|.*not-prometheus.*|.*nginx.*|.*foo.*|.*bar.*|.*baz.*"};{job="prometheus",namespace!="monitoring",instance=~".*web.*|.*prometheus.*|.*not-prometheus.*|.*nginx.*|.*foo.*|.*bar.*|.*baz.*"};{}
