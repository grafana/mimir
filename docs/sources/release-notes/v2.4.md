---
title: "Grafana Mimir version 2.4 release notes"
menuTitle: "V2.4 release notes"
description: "Release notes for Grafana Mimir version 2.4"
weight: 300
---

# Grafana Mimir version 2.4 release notes

Grafana Labs is excited to announce version 2.4 of Grafana Mimir.

The highlights that follow include the top features, enhancements, and bugfixes in this release. For the complete list of changes, see the [changelog](https://github.com/grafana/mimir/blob/main/CHANGELOG.md).

**Note**: If you are upgrading from Grafana Mimir 2.3, review the [list of important changes](#important-changes) that follow.

## Features and enhancements

- **Query-scheduler ring-based service discovery**:
  The [query-scheduler]({{< relref "../operators-guide/architecture/components/query-scheduler/index.md" >}}) is an optional, stateless component that retains a queue of queries to execute, and distributes the workload to available queriers. The use the query-scheduler, query-frontends and queriers are required to discover the addresses of the query-scheduler instances.

  Other than the DNS-based service discovery, Mimir 2.4 introduces the ring-based service discovery for the query-scheduler. When enabled, the query-schedulers join their own hash ring (similar to other Mimir components), and the query-frontends and queriers discover query-scheduler instances via the ring.

  The ring-based service discovery makes easier to setup the query-scheduler in environments where you can't easily define a DNS entry resolving to the running query-scheduler instances. Refer to [query-scheduler configuration]({{< relref "../operators-guide/architecture/components/query-scheduler/index.md#configuration" >}}) for more information.

- **New API endpoint exposing per-tenant limits**:
  Mimir 2.4 introduces a new API endpoint, available on all Mimir components that load the runtime configuration, exposing the limits for the authenticated tenant. This new API endpoint can be used when developing custom integrations with Mimir that require looking up the actual limits applied on a given tenant. Refer to [Get tenant limits]({{< relref "../operators-guide/reference-http-api/index.md#get-tenant-limits" >}}) for more information.

- **New TLS configuration options**:
  Mimir 2.4 introduces new options to configure the accepted TLS cipher suites and minimum version for the HTTP and gRPC clients used between Mimir components, or by Mimir to communicate to external services (e.g. Consul or etcd).

  These new configuration options can be used to override the default TLS settings and meet your security policies. Refer to [Securing Grafana Mimir communications with TLS]({{< relref "../operators-guide/secure/securing-communications-with-tls.md" >}}) for more information.

- **Maximum range query length limit**:
  Mimir 2.4 introduces the new configuration option `-query-frontend.max-total-query-length` to limit the maximum range query length, computed as the query's `end` minus `start` timestamp. This limit is enforced in the query-frontend and defaults to `-store.max-query-length` if unset.

  The new configuration option allows you to set different limits between the received query maximum length (`-query-frontend.max-total-query-length`) and the maximum length of partial queries after splitting and sharding (`-store.max-query-length`).

### Helm chart improvements

The Mimir Helm chart is the best way to install Mimir on Kubernetes. As part of the Mimir 2.4 release, weâ€™re also releasing version 3.2 of the Mimir Helm chart.

Notable enhancements follow. For the full list of changes, see the [Helm chart changelog](https://github.com/grafana/mimir/tree/main/operations/helm/charts/mimir-distributed/CHANGELOG.md).

- TODO

## Important changes

In Grafana Mimir 2.4 we have changed the default values of the following configuration options:

- `-distributor.remote-timeout` has been changed from `20s` to `2s`.
- `-distributor.forwarding.request-timeout` has been changed from `10s` to `2s`.
- `-blocks-storage.tsdb.head-compaction-concurrency` has been changed from 5 to 1.
- The hash ring heartbeat period for distributors, ingesters, rulers and compactors has been increased from `5s` to `15s`.

With Grafana Mimir 2.4 we have enabled the [anonymous usage statistics tracking]({{< relref "../operators-guide/configure/about-anonymous-usage-statistics-reporting.md" >}}) by default.
Mimir maintainers use this anonymous information to learn more about how the open source community runs Mimir and what the Mimir team should focus on when working on the next features and documentation improvements.
If possible, we ask you to keep the usage reporting feature enabled.
In case you want to opt-out from anonymous usage statistics reporting, refer to [Disable the anonymous usage statistics reporting]({{< relref "../operators-guide/configure/about-anonymous-usage-statistics-reporting.md#disable-the-anonymous-usage-statistics-reporting" >}}).

## Bug fixes

- [PR 2979](https://github.com/grafana/mimir/pull/2979): Fix remote write HTTP response status code returned by Mimir when failing to write only to one ingester (the quorum is still honored when running Mimir with the default replication factor of 3) and some series are not ingested because of validation errors or some limits being reached.
- [PR 3005](https://github.com/grafana/mimir/pull/3005): Fix the querier to re-balance its workers connections when a query-frontend or query-scheduler instance is terminated.
- [PR 2963](https://github.com/grafana/mimir/pull/2963): Fix the remote read endpoint to correctly support the `Accept-Encoding: snappy` HTTP request header.
