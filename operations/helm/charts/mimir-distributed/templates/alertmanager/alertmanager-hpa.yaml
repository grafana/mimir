{{- $zonesMap := include "mimir.zoneAwareReplicationMap" (dict "ctx" $ "component" "alertmanager") | fromYaml -}}
{{- range $zoneName, $rolloutZone := $zonesMap }}
{{- with $ -}}
{{- include "mimir.lib.horizontalPodAutoscaler" (dict
  "ctx" $
  "component" "alertmanager"
  "kind" (.Values.alertmanager.statefulSet.enabled | ternary "StatefulSet" "Deployment")
  "zoneName" $zoneName
  "rolloutZone" $rolloutZone
  "zoneAware" .Values.alertmanager.zoneAwareReplication.enabled
  ) }}

---
{{ end }}
{{ end }}
