{{- if .Values.graphite.enabled -}}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ template "mimir.fullname" . }}-graphite-schemas
  labels:
    app: {{ template "mimir.name" . }}
    chart: {{ template "mimir.chart" . }}
    release: {{ .Release.Name }}
    heritage: {{ .Release.Service }}
  namespace: {{ .Release.Namespace | quote }}
data:
{{- range  $storageSchemas := toStrings .Values.graphite_querier.schemasConfiguration.storageSchemas }}
  storage-schemas.conf: |
{{ $storageSchemas | indent 4}}
{{- end }}

{{- range  $storageAggregations := toStrings .Values.graphite_querier.schemasConfiguration.storageAggregations }}
  storage-aggregations.conf: |
{{ $storageAggregations | indent 4}}
{{- end }}
{{- end -}}
