{{- if .Values.graphite.enabled -}}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "mimir.resourceName" (dict "ctx" . "component" "graphite-schemas") }}
  labels:
    {{- include "mimir.labels" (dict "ctx" . "component" "graphite-schemas") | nindent 4 }}
  namespace: {{ .Release.Namespace | quote }}
data:
{{- range  $storageSchemas := toStrings .Values.graphite_querier.schemasConfiguration.storageSchemas }}
  storage-schemas.conf: |
{{ $storageSchemas | indent 4}}
{{- end }}

{{- range  $storageAggregations := toStrings .Values.graphite_querier.schemasConfiguration.storageAggregations }}
  storage-aggregations.conf: |
{{ $storageAggregations | indent 4}}
{{- end }}
{{- end -}}
