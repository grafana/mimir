# Enable enterprise features (required for federation-frontend)
enterprise:
  enabled: true

# Enable and configure federation-frontend
federation_frontend:
  enabled: true
  replicas: 2
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 1
      memory: 256Mi

mimir:
  structuredConfig:
    auth:
      type: trust
    instrumentation:
      enabled: false
    # The federation-frontend doesn't handle auth. Disabling multi-tenant means the FF doesn't need to check for the X-Scope-OrgID header
    # and will use the auth material from the proxy_targets configuration.
    # If using the federation-frontend.
    multitenancy_enabled: false
    federation:
      proxy_targets:
        - name: "mimir-distributed-1"
          url: "http://mimir-query-frontend.real-deployment.svc.cluster.local:8080/prometheus"
        - name: "mimir-distributed-2"
          url: "http://mimir-query-frontend.real-deployment.svc.cluster.local:8080/prometheus"

# Disable all other components
distributor:
  replicas: 0
admin_api:
  replicas: 0
alertmanager:
  enabled: false
ingester:
  replicas: 0
gateway:
  replicas: 0
querier:
  replicas: 0
query_frontend:
  replicas: 0
query_scheduler:
  enabled: false
compactor:
  replicas: 0
store_gateway:
  replicas: 0
ruler:
  enabled: false
overrides_exporter:
  enabled: false

# Disable all caches
admin-cache:
  enabled: false
chunks-cache:
  enabled: false
index-cache:
  enabled: false
metadata-cache:
  enabled: false
results-cache:
  enabled: false

# Keep using minio to allow setting up the admin bucket
minio:
  enabled: false

rollout_operator:
  enabled: true

tokengenJob:
  enable: false
