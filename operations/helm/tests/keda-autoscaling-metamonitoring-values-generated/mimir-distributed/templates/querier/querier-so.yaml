---
# Source: mimir-distributed/templates/querier/querier-so.yaml
apiVersion: keda.sh/v1alpha1
kind: ScaledObject
metadata:
  name: keda-autoscaling-metamonitoring-values-mimir-querier
  labels:
    app.kubernetes.io/name: mimir
    app.kubernetes.io/instance: keda-autoscaling-metamonitoring-values
    app.kubernetes.io/component: querier
<<<<<<< HEAD
=======
    app.kubernetes.io/part-of: memberlist
>>>>>>> 9226de1c4 (feat(helm): Adding KEDA autoscaling support)
    app.kubernetes.io/managed-by: Helm
  annotations:
    {}
  namespace: "citestns"
spec:
  advanced:
    horizontalPodAutoscalerConfig:
      behavior:
        scaleDown:
          policies:
<<<<<<< HEAD
          - periodSeconds: 120
            type: Percent
            value: 10
          stabilizationWindowSeconds: 600
        scaleUp:
          policies:
          - periodSeconds: 120
            type: Percent
            value: 50
          - periodSeconds: 120
            type: Pods
            value: 15
          stabilizationWindowSeconds: 60
=======
          - periodSeconds: 60
            type: Percent
            value: 10
>>>>>>> 9226de1c4 (feat(helm): Adding KEDA autoscaling support)
  maxReplicaCount: 10
  minReplicaCount: 2
  pollingInterval: 10
  scaleTargetRef:
    name: keda-autoscaling-metamonitoring-values-mimir-querier
    apiVersion: apps/v1
    kind: Deployment
  triggers:
  - metadata:
<<<<<<< HEAD
      query: sum(max_over_time(cortex_query_scheduler_inflight_requests{container="query-scheduler",namespace="citestns",quantile="0.5"}[1m]))
      serverAddress: https://mimir.example.com/prometheus
      threshold: "6"
      customHeaders: "X-Scope-OrgID=tenant-1"
    name: cortex_querier_hpa_default
    type: prometheus
  - metadata:
      query: sum(rate(cortex_querier_request_duration_seconds_sum{container="querier",namespace="citestns"}[1m]))
      serverAddress: https://mimir.example.com/prometheus
      threshold: "6"
      customHeaders: "X-Scope-OrgID=tenant-1"
    name: cortex_querier_hpa_default_requests_duration
=======
      metricName: cortex_querier_hpa_default
      query: sum(max_over_time(cortex_query_scheduler_inflight_requests{container="query-scheduler",namespace="citestns",quantile="0.75"}[5m]))
      serverAddress: https://mimir.example.com/prometheus
      threshold: "6"
      customHeaders: "X-Scope-OrgID=tenant-1"
>>>>>>> 9226de1c4 (feat(helm): Adding KEDA autoscaling support)
    type: prometheus
