{
  $schema: 'https://docs.renovatebot.com/renovate-schema.json',
  extends: [
    'config:recommended',
  ],
  baseBranchPatterns: [
    'main',
    'release-2.17',
    'release-2.16',
  ],
  postUpdateOptions: [
    'gomodTidy',
    'gomodUpdateImportPaths',
  ],
  schedule: [
    'before 9am on Monday',
  ],
  packageRules: [
    {
      matchBaseBranches: [
        'release-2.17',
        'release-2.16',
      ],
      enabled: false,
      matchPackageNames: [
        '*',
      ],
    },
    {
      // Don't update replace directives.
      matchPackageNames: [
        'github.com/grafana/mimir-prometheus',
        'github.com/grafana/memberlist',
        'github.com/grafana/regexp',
        'github.com/colega/go-yaml-yaml',
        'github.com/grafana/goautoneg',
        'github.com/grafana/opentracing-contrib-go-stdlib',
        'github.com/charleskorn/go-grpc',
        'github.com/grafana/mimir-otlptranslator',
      ],
      enabled: false,
    },
    {
      // Update Go version everywhere at once: build image, go.mod and GitHub Actions workflows.
      matchDatasources: [
        'docker',
        'golang-version',
        'github-releases',
      ],
      matchPackageNames: [
        'go',
        'golang',
        'actions/go-versions',
      ],
      groupName: 'Go',
    },
    {
      description: 'Enable updating Node.js dependencies in operations/mimir-mixin-tools/screenshots',
      matchFileNames: [
        'operations/mimir-mixin-tools/screenshots/**',
      ],
      matchManagers: [
        'npm',
      ],
      enabled: true,
    },
    {
      description: 'Pin jaegertracing/all-in-one Docker image, since newer versions lack the agent we depend on',
      matchPackageNames: [
        'jaegertracing/all-in-one',
      ],
      matchDatasources: [
        'docker',
      ],
      enabled: false,
    },
  ],
  branchPrefix: 'deps-update/',
  labels: [
    'dependency-update',
  ],
  vulnerabilityAlerts: {
    enabled: true,
    labels: [
      'security-update',
    ],
  },
  osvVulnerabilityAlerts: true,
  dependencyDashboard: false,
}
